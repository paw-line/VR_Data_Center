<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VRDC: Класс Distributor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VRDC
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Data center monitoring visualisation in virtual reality</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Поиск');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pub-static-methods">Открытые статические члены</a> &#124;
<a href="#pri-methods">Закрытые члены</a> &#124;
<a href="#pri-attribs">Закрытые данные</a> &#124;
<a href="#pri-static-attribs">Закрытые статические данные</a> &#124;
<a href="class_distributor-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle">
<div class="title">Класс Distributor</div>  </div>
</div><!--header-->
<div class="contents">

<p>Синглтон-дистрибутор данных  
 <a href="class_distributor.html#details">Подробнее...</a></p>
<div class="dynheader">
Граф наследования:Distributor:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_distributor.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:af0d4d0c40e6881afc733381f541fb7c4"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_data_source.html">DataSource</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#af0d4d0c40e6881afc733381f541fb7c4">GetSources</a> ()</td></tr>
<tr class="memdesc:af0d4d0c40e6881afc733381f541fb7c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Возвращает список источников в сцене.  <a href="class_distributor.html#af0d4d0c40e6881afc733381f541fb7c4">Подробнее...</a><br /></td></tr>
<tr class="separator:af0d4d0c40e6881afc733381f541fb7c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cdb2bb213b00359a039ef958177bf11"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#a4cdb2bb213b00359a039ef958177bf11">RefreshSources</a> ()</td></tr>
<tr class="memdesc:a4cdb2bb213b00359a039ef958177bf11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Функция, обновляющая список источников на сцене. Возвращает разницу в длинне старого и нового списка.  <a href="class_distributor.html#a4cdb2bb213b00359a039ef958177bf11">Подробнее...</a><br /></td></tr>
<tr class="separator:a4cdb2bb213b00359a039ef958177bf11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf61751a15d5c864d349d2ba28cc11ba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#adf61751a15d5c864d349d2ba28cc11ba">SourceSet</a> (string topic, float data, string type)</td></tr>
<tr class="memdesc:adf61751a15d5c864d349d2ba28cc11ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Метод установки данных и типа источника  <a href="class_distributor.html#adf61751a15d5c864d349d2ba28cc11ba">Подробнее...</a><br /></td></tr>
<tr class="separator:adf61751a15d5c864d349d2ba28cc11ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Открытые статические члены</h2></td></tr>
<tr class="memitem:ab544af7702e1048b6b0cd90059d938ac"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_distributor.html">Distributor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#ab544af7702e1048b6b0cd90059d938ac">GetInstance</a> ()</td></tr>
<tr class="memdesc:ab544af7702e1048b6b0cd90059d938ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Функция-интерфейс для получения синглтона Возвращает ссылку на синглтон.  <a href="class_distributor.html#ab544af7702e1048b6b0cd90059d938ac">Подробнее...</a><br /></td></tr>
<tr class="separator:ab544af7702e1048b6b0cd90059d938ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Закрытые члены</h2></td></tr>
<tr class="memitem:a9bcd95bbb8f4c5455b8a8b9b0883e365"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#a9bcd95bbb8f4c5455b8a8b9b0883e365">Distributor</a> ()</td></tr>
<tr class="separator:a9bcd95bbb8f4c5455b8a8b9b0883e365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab771154901afb2ddbc6cf064b67d80c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#ab771154901afb2ddbc6cf064b67d80c6">Awake</a> ()</td></tr>
<tr class="memdesc:ab771154901afb2ddbc6cf064b67d80c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Функция, инициализурующая синглтон дистрибутор. Если ссылка на синглтон ещё не была инициализированна, то инициализирует её этим объектом. Если же она уже не пуста, то это значит что синглтор уже иницализирован. Тогда функция уничтожает данный объект и выводит предупреждение. <br  />
После этого производится поиск всех источников данных на сцене и ссылки на них заносятся в список sources. По списку источников формируется список MQTT-топиков этих источников. MQTT-топик источника это его имя. После этого подключается к MQTT брокеру по заданному в объекте IP-адресу с заданным в объекте идентификатором. Привязывает событие получения данных к обработчику. Затем подписывается на топики. <br  />
.  <a href="class_distributor.html#ab771154901afb2ddbc6cf064b67d80c6">Подробнее...</a><br /></td></tr>
<tr class="separator:ab771154901afb2ddbc6cf064b67d80c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a632af2cff496c09d2532b514955fe419"><td class="memItemLeft" align="right" valign="top">IEnumerator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#a632af2cff496c09d2532b514955fe419">DelayedRefresh</a> (float _time)</td></tr>
<tr class="separator:a632af2cff496c09d2532b514955fe419"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Закрытые данные</h2></td></tr>
<tr class="memitem:a20ad1da9c20a9dd274e07288079d1da4"><td class="memItemLeft" align="right" valign="top">List&lt; <a class="el" href="class_data_source.html">DataSource</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#a20ad1da9c20a9dd274e07288079d1da4">sources</a></td></tr>
<tr class="memdesc:a20ad1da9c20a9dd274e07288079d1da4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Список всех источников данных на сцене  <a href="class_distributor.html#a20ad1da9c20a9dd274e07288079d1da4">Подробнее...</a><br /></td></tr>
<tr class="separator:a20ad1da9c20a9dd274e07288079d1da4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a691b461c938e149d68bcb309972b1d13"><td class="memItemLeft" align="right" valign="top">List&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#a691b461c938e149d68bcb309972b1d13">sourcesnames</a> = new List&lt;string&gt;()</td></tr>
<tr class="memdesc:a691b461c938e149d68bcb309972b1d13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Список имен источников на сцене  <a href="class_distributor.html#a691b461c938e149d68bcb309972b1d13">Подробнее...</a><br /></td></tr>
<tr class="separator:a691b461c938e149d68bcb309972b1d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Закрытые статические данные</h2></td></tr>
<tr class="memitem:aa03ef4020eb11aac933ce91c558c3fa8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="class_distributor.html">Distributor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_distributor.html#aa03ef4020eb11aac933ce91c558c3fa8">instance</a></td></tr>
<tr class="memdesc:aa03ef4020eb11aac933ce91c558c3fa8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Статичная ссылка на единственный экземпляр класса  <a href="class_distributor.html#aa03ef4020eb11aac933ce91c558c3fa8">Подробнее...</a><br /></td></tr>
<tr class="separator:aa03ef4020eb11aac933ce91c558c3fa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p>Синглтон-дистрибутор данных </p>
<dl class="section author"><dt>Авторы</dt><dd>Пивко Артём </dd></dl>
<dl class="section version"><dt>Версия</dt><dd>1.1 </dd></dl>
<dl class="section date"><dt>Дата</dt><dd>19.05.20 </dd></dl>
<dl class="section warning"><dt>Предупреждения</dt><dd>Этот скрипт должен быть размещен на сцене в ЕДИНСТВЕННОМ экземпляре. Если его не будет, не будут работать никакие визуализаторы. Если их будет много, останется только один.</dd></dl>
<p>Этот класс составляет список всех источников данных на сцене и хранит её для передачи визуализаторам. Преимущественно объемным. </p>
</div><h2 class="groupheader">Конструктор(ы)</h2>
<a id="a9bcd95bbb8f4c5455b8a8b9b0883e365"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bcd95bbb8f4c5455b8a8b9b0883e365">&#9670;&nbsp;</a></span>Distributor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Distributor.Distributor </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Методы</h2>
<a id="ab771154901afb2ddbc6cf064b67d80c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab771154901afb2ddbc6cf064b67d80c6">&#9670;&nbsp;</a></span>Awake()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Distributor.Awake </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Функция, инициализурующая синглтон дистрибутор. Если ссылка на синглтон ещё не была инициализированна, то инициализирует её этим объектом. Если же она уже не пуста, то это значит что синглтор уже иницализирован. Тогда функция уничтожает данный объект и выводит предупреждение. <br  />
После этого производится поиск всех источников данных на сцене и ссылки на них заносятся в список sources. По списку источников формируется список MQTT-топиков этих источников. MQTT-топик источника это его имя. После этого подключается к MQTT брокеру по заданному в объекте IP-адресу с заданным в объекте идентификатором. Привязывает событие получения данных к обработчику. Затем подписывается на топики. <br  />
. </p>

</div>
</div>
<a id="a632af2cff496c09d2532b514955fe419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a632af2cff496c09d2532b514955fe419">&#9670;&nbsp;</a></span>DelayedRefresh()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IEnumerator Distributor.DelayedRefresh </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>_time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab544af7702e1048b6b0cd90059d938ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab544af7702e1048b6b0cd90059d938ac">&#9670;&nbsp;</a></span>GetInstance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="class_distributor.html">Distributor</a> Distributor.GetInstance </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Функция-интерфейс для получения синглтона Возвращает ссылку на синглтон. </p>

</div>
</div>
<a id="af0d4d0c40e6881afc733381f541fb7c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0d4d0c40e6881afc733381f541fb7c4">&#9670;&nbsp;</a></span>GetSources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;<a class="el" href="class_data_source.html">DataSource</a>&gt; Distributor.GetSources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Возвращает список источников в сцене. </p>

</div>
</div>
<a id="a4cdb2bb213b00359a039ef958177bf11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cdb2bb213b00359a039ef958177bf11">&#9670;&nbsp;</a></span>RefreshSources()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Distributor.RefreshSources </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Функция, обновляющая список источников на сцене. Возвращает разницу в длинне старого и нового списка. </p>

</div>
</div>
<a id="adf61751a15d5c864d349d2ba28cc11ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf61751a15d5c864d349d2ba28cc11ba">&#9670;&nbsp;</a></span>SourceSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Distributor.SourceSet </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>topic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Метод установки данных и типа источника </p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">[string]</td><td>topic MQTT-топик источника, он же его имя. </td></tr>
    <tr><td class="paramname">[float]</td><td>data Данные </td></tr>
    <tr><td class="paramname">[string]</td><td>type Тип данных Производит линейный поиск по списку имен источников и при нахождении устанавливает значение и тип источника равными аргументам. Если источник был найден, возвращает истину, иначе ложь. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Данные класса</h2>
<a id="aa03ef4020eb11aac933ce91c558c3fa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa03ef4020eb11aac933ce91c558c3fa8">&#9670;&nbsp;</a></span>instance</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_distributor.html">Distributor</a> Distributor.instance</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Статичная ссылка на единственный экземпляр класса </p>

</div>
</div>
<a id="a20ad1da9c20a9dd274e07288079d1da4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20ad1da9c20a9dd274e07288079d1da4">&#9670;&nbsp;</a></span>sources</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;<a class="el" href="class_data_source.html">DataSource</a>&gt; Distributor.sources</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Список всех источников данных на сцене </p>

</div>
</div>
<a id="a691b461c938e149d68bcb309972b1d13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a691b461c938e149d68bcb309972b1d13">&#9670;&nbsp;</a></span>sourcesnames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">List&lt;string&gt; Distributor.sourcesnames = new List&lt;string&gt;()</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Список имен источников на сцене </p>

</div>
</div>
<hr/>Объявления и описания членов класса находятся в файле:<ul>
<li>D:/GitProjects/VR_Data_Center/Assets/Scripts/<a class="el" href="_distributor_8cs.html">Distributor.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Создано системой &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
